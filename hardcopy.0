 main.sc  + crap10.sc  + crap9.sc  + hmatrix.sc  player.sc  editplayer.sc  score.sc  mixer.sc  live7.sc                                                                          X
    temp.string = "Tempo:" + clock.tempo.asString;
    pos = StaticText(vlayout, 20);
    pos.string = "002 / 004 | 2 | 1254";
    but_layout = HLayoutView(vlayout, Rect(0,0,size.x,20));
    bt = { arg i;
        StaticText(but_layout, Rect(0,0,20,20)).background_(Color.black);
    } ! clock.beatsPerBar;
    bar = RangeSlider(vlayout, 40@20);



    clock.postln;
    task = TaskProxy.new;
    task.source = {
        clock_manager.start_pos = clock.beats; // debug
        10000.do { //FIXME: fake loop
            clock.beatInBar.debug("beatInBar");
            bt[clock.beatInBar].background = if(clock_manager.is_near_end) { Color.red } { Color.green };
            bt.wrapAt(clock.beatInBar -1).background = Color.black;
            pos.string = (clock.beats - clock_manager.start_pos).asString
                        + "/" + clock_manager.play_length.asString
                        + "|" + clock.beats.asString; // FIXME: find a way to zero pad
            bar.range = (clock.beats - clock_manager.start_pos) / clock_manager.play_length;
            1.wait;
        }
    };
    clock.playNextBar({ task.play(clock) });

    vlayout.onClose = vlayout.onClose.addFunc { "close".postln; task.stop };

    ~make_view_responder.(vlayout, clock_manager, (
        tempo: { arg obj, msg, tempo;
            temp.string = "Tempo: " ++ tempo.asString;
        },
        pos: { arg obj, msg, position;
            pos.string = clock.beats.asString;
        },
        head_state: { arg obj, msg, state;
            switch(state,
                \record, { rectxt.string = "Rec"; rectxt.background = Color.red },
                \overdub, { rectxt.string = "Rec"; rectxt.background = Color.darkred },
                \play, { rectxt.string = "Play"; rectxt.background = Color.green },
                Color.red.red = 0;
                Color.red.green = 1;
"/tmp/sclang-pipe" [Périph.] 1L, 25C ajouté(s)                                                                                                                  296,23-35     20%
